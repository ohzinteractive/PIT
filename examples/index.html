<!DOCTYPE html>
<html>
	<head>
    <meta charset="utf-8">
		<title>PIT controller example</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="three.js"></script>
		
		<script type='module'>

			import {InputController} from './build/PIT.js';

			var scene  = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );
			camera.position.z = 3;

			var renderer = new THREE.WebGLRenderer({antialias: true});
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );


			var geometry = new THREE.BoxBufferGeometry( 1, 1, 1 );
			var material = new THREE.MeshNormalMaterial();
			var cube = new THREE.Mesh( geometry, material );
			scene.add( cube );



			let input = new InputController(document.body);

			var animate = function () {
				// console.log("mouse_pos", input.mouse_pos.x, "NDC", input.NDC.x);
				// console.log("mouse_pos", input.mouse_pos.y, "NDC", input.NDC.y);
				// console.log("mouse_delta", input.mouse_pos_delta.x, "NDC delta", input.NDC_delta.x);


				if(input.left_mouse_button_pressed)
					console.log('pressed')

				if(input.left_mouse_button_down)
				{
					cube.rotation.y += input.NDC_delta.x *2
					console.log('down')
				}

				if(input.left_mouse_button_released)
					console.log('released')



				renderer.render(scene, camera);

				input.clear();
				requestAnimationFrame( animate );

			};

			animate();
		</script>
	</body>
</html>
